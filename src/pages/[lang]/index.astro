---
import Layout from "../../layouts/Layout.astro";
import ThemeToggle from "../../components/ThemeToggle.astro";
import LanguageSelector from "../../components/LanguageSelector.astro";
import Hero from "../../components/landing/Hero.astro";
import Problems from "../../components/landing/Problems.astro";
import Features from "../../components/landing/Features.astro";
import SmartScheduling from "../../components/landing/SmartScheduling.astro";
import NotificationModes from "../../components/landing/NotificationModes.astro";
import DeepFeatures from "../../components/landing/DeepFeatures.astro";
import Benefits from "../../components/landing/Benefits.astro";
import Languages from "../../components/landing/Languages.astro";
import Gallery from "../../components/landing/Gallery.astro";
import Pricing from "../../components/landing/Pricing.astro";
import FinalCTA from "../../components/landing/FinalCTA.astro";
import Footer from "../../components/Footer.astro";
import Header from "../../components/Header.astro";
import {
	supportedLangs,
	isValidLang,
	defaultLang,
	type Lang,
} from "../../i18n/ui-locales";
import { useTranslations } from "../../i18n";
import { Image } from "astro:assets";
import appIcon from "../../assets/images/Icon.png";

export function getStaticPaths() {
	return supportedLangs.map((lang) => ({
		params: { lang },
	}));
}

const { lang } = Astro.params;

const currentLang = lang as Lang;
const t = useTranslations(currentLang);
---

<Layout lang={currentLang}>
	<main class="relative overflow-hidden min-h-screen">
		<div class="fixed inset-0 pointer-events-none overflow-hidden z-0">
			<div
				class="absolute w-[500px] h-[500px] bg-blue-400/20 dark:bg-blue-500/10 rounded-full blur-[100px] top-[-5%] left-[-5%]"
			>
			</div>
			<div
				class="absolute w-[400px] h-[400px] bg-purple-400/15 dark:bg-purple-500/10 rounded-full blur-[100px] top-[40%] right-[-5%]"
			>
			</div>
		</div>

		<Header lang={currentLang} isLanding={true} />

		<Hero lang={currentLang} />
		<Problems lang={currentLang} />
		<Features lang={currentLang} />
		<SmartScheduling lang={currentLang} />
		<NotificationModes lang={currentLang} />
		<DeepFeatures lang={currentLang} />
		<Benefits lang={currentLang} />
		<Languages lang={currentLang} />
		<Gallery lang={currentLang} />
		<Pricing lang={currentLang} />
		<FinalCTA lang={currentLang} />
		<Footer lang={currentLang} />
	</main>
</Layout>

<!-- Tracking Script -->
<script define:vars={{ currentLang }}>
	import {
		trackPageView,
		startHeartbeat,
		isSupabaseConfigured,
	} from "../../lib/supabase";

	// Track page view on load
	if (isSupabaseConfigured()) {
		trackPageView(window.location.pathname, currentLang);
		startHeartbeat();
	}
</script>
