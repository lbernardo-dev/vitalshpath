---
import "../styles/global.css";
import { languages, supportedLangs, type Lang } from "../i18n/ui-locales";
import { useTranslations } from "../i18n";

interface Props {
	lang: Lang;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
const { dir } = languages[lang];

const title = t("meta.title");
const description = t("meta.description");

const siteUrl = "https://vitalspath.com";
---

<!DOCTYPE html>
<html lang={lang} dir={dir}>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content={description} />

		<meta property="og:type" content="website" />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta
			property="og:image"
			content={`${import.meta.env.BASE_URL}/assets/images/app-mockup.png`}
		/>
		<meta property="og:locale" content={lang} />

		<link
			rel="icon"
			type="image/svg+xml"
			href={`${import.meta.env.BASE_URL}/favicon.svg`}
		/>
		<link
			rel="apple-touch-icon"
			href={`${import.meta.env.BASE_URL}/assets/images/Icon.png`}
		/>
		<meta name="theme-color" content="#007aff" />

		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>

		<link rel="canonical" href={`${siteUrl}/${lang}/`} />
		<link rel="alternate" hreflang="x-default" href={`${siteUrl}/en/`} />
		{
			supportedLangs.map((l) => (
				<link rel="alternate" hreflang={l} href={`${siteUrl}/${l}/`} />
			))
		}

		<script is:inline>
			(function () {
				try {
					var saved = localStorage.getItem("theme");
					var prefersDark = window.matchMedia(
						"(prefers-color-scheme: dark)"
					).matches;
					var isDark = saved === "dark" || (!saved && prefersDark);
					document.documentElement.classList.toggle("dark", isDark);
				} catch (e) {}
			})();
		</script>
	</head>
	<body
		class="bg-white dark:bg-black text-gray-900 dark:text-white min-h-screen transition-colors"
	>
		<div class="fixed inset-0 pointer-events-none overflow-hidden z-0">
			<div
				class="absolute w-[500px] h-[500px] bg-blue-400/20 dark:bg-blue-500/10 rounded-full blur-[100px] top-[-5%] left-[-5%] animate-float"
			>
			</div>
			<div
				class="absolute w-[400px] h-[400px] bg-purple-400/15 dark:bg-purple-500/10 rounded-full blur-[100px] top-[40%] right-[-5%] animate-float"
				style="animation-delay: -4s;"
			>
			</div>
		</div>
		<slot />
	</body>
</html>
