---
interface Props {
    color?: "black" | "silver" | "titanium";
    model?: "iphone17" | "iphone15";
    showIsland?: boolean;
}

const { color = "black", model = "iphone17", showIsland = true } = Astro.props;

const isIP17 = model === "iphone17";

// Adjusting to a true 19.5:9 aspect ratio (approx 2.167)
// Width 310px -> Height should be ~672px
const frameClass = isIP17
    ? "border-[4px] rounded-[3.2rem] h-[672px] w-[310px] ring-1 ring-gray-900/5 dark:ring-white/10"
    : "border-[6px] rounded-[3.5rem] h-[672px] w-[310px] ring-1 ring-gray-900/10 dark:ring-white/10";

const containerClass = isIP17
    ? "w-full h-full rounded-[3rem]"
    : "w-full h-full rounded-[3.3rem]";

const islandClass = isIP17
    ? "w-[84px] h-[26px] top-[14px]" // Modern dynamic island size
    : "w-[84px] h-[26px] top-[14px]"; // Standard Dynamic Island for IP15
---

<div
    class={`relative mx-auto border-gray-950 dark:border-black bg-gray-950 dark:bg-black shadow-2xl transition-all duration-500 overflow-hidden ${frameClass}`}
>
    <!-- Dynamic Island -->
    {
        showIsland && (
            <div
                class={`absolute left-1/2 -translate-x-1/2 bg-black rounded-full z-20 flex items-center justify-center gap-2 ${islandClass}`}
            >
                <div class="w-2.5 h-2.5 rounded-full bg-gray-800/80 ring-1 ring-white/5 opacity-80 backdrop-blur-md" />
                <div class="w-3.5 h-3.5 rounded-full bg-slate-900/90 ring-2 ring-white/10 opacity-60 backdrop-blur-lg" />
            </div>
        )
    }

    <!-- Buttons -->
    <!-- Action Button (Left) -->
    <div
        class="h-[25px] w-[2px] bg-slate-600/50 absolute -start-[4px] top-28 rounded-s-md"
    >
    </div>
    <!-- Volume Up (Left) -->
    <div
        class="h-[45px] w-[2px] bg-slate-600/50 absolute -start-[4px] top-40 rounded-s-md"
    >
    </div>
    <!-- Volume Down (Left) -->
    <div
        class="h-[45px] w-[2px] bg-slate-600/50 absolute -start-[4px] top-56 rounded-s-md"
    >
    </div>
    <!-- Power Button (Right) -->
    <div
        class="h-[60px] w-[2px] bg-slate-600/50 absolute -end-[4px] top-44 rounded-e-md"
    >
    </div>

    <!-- Screen -->
    <div
        class={`overflow-hidden bg-white dark:bg-gray-950 relative z-10 w-full h-full mx-auto ${containerClass}`}
    >
        <div class="w-full h-full relative overflow-hidden">
            <slot />
        </div>
    </div>
</div>
