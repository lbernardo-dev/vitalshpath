---
import { Image } from "astro:assets";
import { type Lang } from "../../i18n/ui-locales";
import { useTranslations } from "../../i18n";
import {
    Smartphone,
    Bell,
    Activity,
    Sparkles,
    LayoutDashboard,
} from "lucide-react";

// Image imports
import screenWidgetsHome from "../../assets/images/screens/screen-20-widgets-home.PNG";
import screenWidgetCap from "../../assets/images/screens/widget_cap.png";
import screenLiveActivity2 from "../../assets/images/screens/screen-27-live-activity2.PNG";

interface Props {
    lang: Lang;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
---

<section
    id="widgets"
    class="py-16 md:py-24 relative overflow-hidden bg-white dark:bg-black transition-colors duration-500"
>
    <!-- Decorative background -->
    <div
        class="absolute top-1/2 left-0 w-96 h-96 bg-blue-500/5 rounded-full blur-[100px] -z-10"
    >
    </div>
    <div
        class="absolute bottom-0 right-0 w-96 h-96 bg-purple-500/5 rounded-full blur-[100px] -z-10"
    >
    </div>

    <div class="container mx-auto px-6 relative z-10">
        <div class="flex flex-col lg:flex-row items-center gap-20">
            <div class="flex-1 reveal">
                <div
                    class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-500/10 border border-blue-500/20 mb-8 backdrop-blur-sm"
                >
                    <Sparkles className="w-4 h-4 text-blue-500" />
                    <span
                        class="text-xs font-black text-blue-600 dark:text-blue-400 uppercase tracking-widest"
                    >
                        {t("widgetsSection.badge")}
                    </span>
                </div>

                <h2
                    class="text-4xl md:text-6xl font-black text-gray-900 dark:text-white mb-8 tracking-tighter italic leading-none"
                >
                    {t("widgetsSection.title")}<br />
                    <span
                        class="bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent"
                    >
                        {t("widgetsSection.titleHighlight")}
                    </span>
                </h2>

                <p
                    class="text-xl text-gray-600 dark:text-gray-400 mb-10 font-medium leading-relaxed"
                >
                    {t("widgetsSection.description")}
                </p>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-12">
                    <div
                        class="p-6 rounded-3xl bg-gray-50 dark:bg-white/5 border border-transparent dark:border-white/5 transition-all hover:bg-white dark:hover:bg-white/10 shadow-sm hover:shadow-xl reveal stagger-1"
                    >
                        <LayoutDashboard
                            className="w-8 h-8 text-blue-500 mb-4"
                        />
                        <h4
                            class="text-lg font-black text-gray-900 dark:text-white uppercase tracking-tight mb-2"
                        >
                            {t("widgetsSection.items.widgets.title")}
                        </h4>
                        <p class="text-sm text-gray-500 dark:text-gray-400">
                            {t("widgetsSection.items.widgets.desc")}
                        </p>
                    </div>
                    <div
                        class="p-6 rounded-3xl bg-gray-50 dark:bg-white/5 border border-transparent dark:border-white/5 transition-all hover:bg-white dark:hover:bg-white/10 shadow-sm hover:shadow-xl reveal stagger-2"
                    >
                        <Bell className="w-8 h-8 text-purple-500 mb-4" />
                        <h4
                            class="text-lg font-black text-gray-900 dark:text-white uppercase tracking-tight mb-2"
                        >
                            {t("widgetsSection.items.dynamic.title")}
                        </h4>
                        <p class="text-sm text-gray-500 dark:text-gray-400">
                            {t("widgetsSection.items.dynamic.desc")}
                        </p>
                    </div>
                </div>

                <div
                    class="p-8 rounded-[2.5rem] bg-indigo-600 text-white shadow-2xl relative overflow-hidden reveal reveal-scale stagger-3 group"
                >
                    <div class="relative z-10 flex items-center gap-6">
                        <div
                            class="w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center shrink-0 backdrop-blur-md group-hover:scale-110 transition-transform"
                        >
                            <Activity className="w-8 h-8 text-white" />
                        </div>
                        <div>
                            <h4
                                class="text-xl font-black uppercase tracking-tight mb-1"
                            >
                                {t("widgetsSection.items.live.title")}
                            </h4>
                            <p class="text-indigo-100 font-medium">
                                {t("widgetsSection.items.live.desc")}
                            </p>
                        </div>
                    </div>
                    <div
                        class="absolute -right-10 -bottom-10 w-40 h-40 bg-white/5 rounded-full blur-3xl group-hover:scale-150 transition-transform duration-700"
                    >
                    </div>
                </div>
            </div>

            <div class="flex-1 relative reveal-scale stagger-2">
                <div
                    class="relative flex items-center justify-center perspective-[2000px] pt-12"
                >
                    <!-- Home Screen with Widgets -->
                    <div
                        class="relative z-20 transform hover:-rotate-1 transition-transform duration-700"
                    >
                        <div
                            class="w-[280px] md:w-[320px] rounded-[3.5rem] overflow-hidden border-[8px] border-gray-900 dark:border-gray-800 shadow-2xl ring-1 ring-white/10"
                        >
                            <Image
                                src={screenWidgetsHome}
                                alt="iOS Widgets Home"
                                class="w-full h-auto"
                            />
                        </div>
                    </div>

                    <!-- Widget Preview Overlay - Streak History -->
                    <div
                        class="absolute -left-4 md:-left-20 top-20 z-30 transform -rotate-12 scale-90 md:rotate-[-8deg] transition-all duration-700 hover:rotate-0 hover:scale-105 hover:z-40"
                    >
                        <div
                            class="w-[280px] md:w-[300px] rounded-[2rem] overflow-hidden border-[4px] border-gray-900 dark:border-gray-800 shadow-2xl shadow-blue-500/20 ring-1 ring-white/10"
                        >
                            <Image
                                src={screenWidgetCap}
                                alt="Streak History Widget"
                                class="w-full h-auto"
                            />
                        </div>
                    </div>

                    <!-- Live Activity Overlay - Medical Appointments -->
                    <div
                        class="absolute -right-4 md:-right-16 bottom-10 z-10 transform rotate-12 scale-75 md:rotate-[8deg] md:scale-90 opacity-90 transition-all duration-700 hover:rotate-0 hover:scale-100 hover:opacity-100 hover:z-40"
                    >
                        <div
                            class="w-[280px] md:w-[300px] rounded-[2rem] overflow-hidden border-[4px] border-gray-900 dark:border-gray-800 shadow-2xl shadow-purple-500/20 ring-1 ring-white/10"
                        >
                            <Image
                                src={screenLiveActivity2}
                                alt="Live Activity Appointment"
                                class="w-full h-auto"
                            />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
