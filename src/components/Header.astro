---
import { Languages } from "lucide-react";

const { lang = 'es' } = Astro.props; // Default to 'es' if undefined
const isSpanish = lang === 'es';
const targetLang = isSpanish ? 'en' : 'es';
const base = import.meta.env.BASE_URL;
// Fix: Ensure we don't double slash if base is just '/' or handles trailing slashes differently
const cleanBase = base === '/' ? '' : base;
const togglePath = isSpanish ? `${cleanBase}/en` : `${cleanBase}/`;

---

<header class="fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 h-16 transition-all duration-300">
  <div class="clinical-container h-full flex items-center justify-between">
    
    <!-- Logo -->
    <a href={`${cleanBase}/`} class="flex items-center gap-2 group">
        <img src={`${cleanBase}/assets/images/Icon.png`} alt="VitalsPath" class="w-8 h-8 rounded-lg shadow-sm border border-slate-100" />
      <span class="text-lg font-bold tracking-tight text-slate-900">VitalsPath</span>
    </a>

    <!-- Navigation (Desktop) -->
    <nav class="hidden md:flex items-center gap-8">
      <a href="#features" class="text-sm font-medium text-slate-600 hover:text-teal-600 transition-colors">Caracter√≠sticas</a>
      <a href="#reviews" class="text-sm font-medium text-slate-600 hover:text-teal-600 transition-colors">Opiniones</a>
      <a href="#pricing" class="text-sm font-medium text-slate-600 hover:text-teal-600 transition-colors">Planes</a>
    </nav>

    <!-- Actions -->
    <div class="flex items-center gap-3">
      <!-- Language Toggle (Clean Text) -->
      <a href={togglePath} class="flex items-center gap-1.5 px-3 py-1.5 rounded-full text-slate-600 hover:bg-slate-100 transition-colors text-xs font-semibold">
        <Languages className="w-3.5 h-3.5" />
        <span>{isSpanish ? 'ES' : 'EN'}</span>
      </a>

      <!-- CTA (Small) -->
      <a href="#" class="hidden sm:inline-flex items-center justify-center px-4 py-1.5 rounded-full bg-slate-900 text-white text-sm font-medium hover:bg-slate-800 transition-colors shadow-sm">
        Descargar
      </a>
    </div>

  </div>
</header>
